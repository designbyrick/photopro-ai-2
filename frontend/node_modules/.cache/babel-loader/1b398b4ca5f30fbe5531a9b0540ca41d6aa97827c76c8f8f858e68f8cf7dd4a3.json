{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../contexts/AuthContext';import{photoAPI,creditAPI}from'../services/api';import toast from'react-hot-toast';import PhotoUpload from'../components/PhotoUpload';import PhotoGallery from'../components/PhotoGallery';import CreditDisplay from'../components/CreditDisplay';import UserProfile from'../components/UserProfile';import{Camera,Image as ImageIcon,History,User,LogOut,Sparkles,Coins}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const{user,logout,updateUser}=useAuth();const[activeTab,setActiveTab]=useState('upload');const[photos,setPhotos]=useState([]);const[loading,setLoading]=useState(false);const[credits,setCredits]=useState((user===null||user===void 0?void 0:user.credits)||0);useEffect(()=>{loadPhotoHistory();loadCredits();},[]);const loadPhotoHistory=async()=>{try{const response=await photoAPI.getHistory();setPhotos(response.data);}catch(error){console.error('Failed to load photo history:',error);}};const loadCredits=async()=>{try{const response=await creditAPI.getCredits();setCredits(response.data.credits);updateUser({credits:response.data.credits});}catch(error){console.error('Failed to load credits:',error);}};const handlePhotoGenerated=newPhoto=>{setPhotos(prev=>[newPhoto,...prev]);loadCredits();// Refresh credits after generation\ntoast.success('Photo generated successfully!');};const handleLogout=()=>{logout();toast.success('Logged out successfully');};const tabs=[{id:'upload',label:'Generate Photo',icon:Camera},{id:'gallery',label:'My Photos',icon:ImageIcon},{id:'history',label:'History',icon:History},{id:'profile',label:'Profile',icon:User}];return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-800\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white/10 backdrop-blur-md border-b border-white/20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-8 h-8 text-white\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-white\",children:\"PhotoPro AI\"})]}),/*#__PURE__*/_jsx(CreditDisplay,{credits:credits})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-white/80\",children:[\"Welcome, \",(user===null||user===void 0?void 0:user.full_name)||(user===null||user===void 0?void 0:user.username),\"!\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"flex items-center space-x-2 text-white/80 hover:text-white transition-colors\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Logout\"})]})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mb-6\",children:tabs.map(tab=>{const Icon=tab.icon;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"flex items-center space-x-2 px-4 py-2 rounded-lg transition-all \".concat(activeTab===tab.id?'bg-white text-purple-600 shadow-lg':'bg-white/20 text-white/80 hover:bg-white/30'),children:[/*#__PURE__*/_jsx(Icon,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:tab.label})]},tab.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[activeTab==='upload'&&/*#__PURE__*/_jsx(PhotoUpload,{onPhotoGenerated:handlePhotoGenerated,credits:credits}),activeTab==='gallery'&&/*#__PURE__*/_jsx(PhotoGallery,{photos:photos.filter(photo=>photo.status==='completed'),loading:loading}),activeTab==='history'&&/*#__PURE__*/_jsx(PhotoGallery,{photos:photos,loading:loading,showAll:true}),activeTab==='profile'&&/*#__PURE__*/_jsx(UserProfile,{user:user,onCreditsUpdate:loadCredits})]})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useAuth","photoAPI","creditAPI","toast","PhotoUpload","PhotoGallery","CreditDisplay","UserProfile","Camera","Image","ImageIcon","History","User","LogOut","Sparkles","Coins","jsx","_jsx","jsxs","_jsxs","Dashboard","user","logout","updateUser","activeTab","setActiveTab","photos","setPhotos","loading","setLoading","credits","setCredits","loadPhotoHistory","loadCredits","response","getHistory","data","error","console","getCredits","handlePhotoGenerated","newPhoto","prev","success","handleLogout","tabs","id","label","icon","className","children","full_name","username","onClick","map","tab","Icon","concat","onPhotoGenerated","filter","photo","status","showAll","onCreditsUpdate"],"sources":["/Users/ricardobrandao/Documents/ai projects/photopro ai/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { photoAPI, creditAPI } from '../services/api';\nimport toast from 'react-hot-toast';\nimport PhotoUpload from '../components/PhotoUpload';\nimport PhotoGallery from '../components/PhotoGallery';\nimport CreditDisplay from '../components/CreditDisplay';\nimport UserProfile from '../components/UserProfile';\nimport { \n  Camera, \n  Image as ImageIcon, \n  History, \n  User, \n  LogOut,\n  Sparkles,\n  Coins\n} from 'lucide-react';\n\nfunction Dashboard() {\n  const { user, logout, updateUser } = useAuth();\n  const [activeTab, setActiveTab] = useState('upload');\n  const [photos, setPhotos] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [credits, setCredits] = useState(user?.credits || 0);\n\n  useEffect(() => {\n    loadPhotoHistory();\n    loadCredits();\n  }, []);\n\n  const loadPhotoHistory = async () => {\n    try {\n      const response = await photoAPI.getHistory();\n      setPhotos(response.data);\n    } catch (error) {\n      console.error('Failed to load photo history:', error);\n    }\n  };\n\n  const loadCredits = async () => {\n    try {\n      const response = await creditAPI.getCredits();\n      setCredits(response.data.credits);\n      updateUser({ credits: response.data.credits });\n    } catch (error) {\n      console.error('Failed to load credits:', error);\n    }\n  };\n\n  const handlePhotoGenerated = (newPhoto) => {\n    setPhotos(prev => [newPhoto, ...prev]);\n    loadCredits(); // Refresh credits after generation\n    toast.success('Photo generated successfully!');\n  };\n\n  const handleLogout = () => {\n    logout();\n    toast.success('Logged out successfully');\n  };\n\n  const tabs = [\n    { id: 'upload', label: 'Generate Photo', icon: Camera },\n    { id: 'gallery', label: 'My Photos', icon: ImageIcon },\n    { id: 'history', label: 'History', icon: History },\n    { id: 'profile', label: 'Profile', icon: User },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-800\">\n      {/* Header */}\n      <header className=\"bg-white/10 backdrop-blur-md border-b border-white/20\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Sparkles className=\"w-8 h-8 text-white\" />\n                <h1 className=\"text-2xl font-bold text-white\">PhotoPro AI</h1>\n              </div>\n              <CreditDisplay credits={credits} />\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              <span className=\"text-white/80\">\n                Welcome, {user?.full_name || user?.username}!\n              </span>\n              <button\n                onClick={handleLogout}\n                className=\"flex items-center space-x-2 text-white/80 hover:text-white transition-colors\"\n              >\n                <LogOut className=\"w-4 h-4\" />\n                <span>Logout</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Navigation Tabs */}\n      <div className=\"container mx-auto px-4 py-6\">\n        <div className=\"flex flex-wrap gap-2 mb-6\">\n          {tabs.map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${\n                  activeTab === tab.id\n                    ? 'bg-white text-purple-600 shadow-lg'\n                    : 'bg-white/20 text-white/80 hover:bg-white/30'\n                }`}\n              >\n                <Icon className=\"w-4 h-4\" />\n                <span>{tab.label}</span>\n              </button>\n            );\n          })}\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"card\">\n          {activeTab === 'upload' && (\n            <PhotoUpload \n              onPhotoGenerated={handlePhotoGenerated}\n              credits={credits}\n            />\n          )}\n          \n          {activeTab === 'gallery' && (\n            <PhotoGallery \n              photos={photos.filter(photo => photo.status === 'completed')}\n              loading={loading}\n            />\n          )}\n          \n          {activeTab === 'history' && (\n            <PhotoGallery \n              photos={photos}\n              loading={loading}\n              showAll={true}\n            />\n          )}\n          \n          {activeTab === 'profile' && (\n            <UserProfile \n              user={user}\n              onCreditsUpdate={loadCredits}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}